# -*- coding: utf-8 -*-
"""
5graf_real_sum_05_11.py
Построение графиков нагрузок по пальцам для трёх раскладок
(Йцукен, Вызов, Русфон) по сумме всех текстов.
"""

import matplotlib.pyplot as plt

# ===  данные из key_type2.py ===
data = {
    "Йцукен": {
        "Война и мир": {
            "Большой Л": 85414, "Большой П": 561472,
            "Указательный Л": 865935, "Указательный П": 872016,
            "Средний Л": 353430, "Средний П": 200487,
            "Безымянный Л": 97579, "Безымянный П": 107470,
            "Мизинец Л": 97137, "Мизинец П": 243944
        },
        "Диграммы": {
            "Большой Л": 0, "Большой П": 4,
            "Указательный Л": 199, "Указательный П": 194,
            "Средний Л": 89, "Средний П": 87,
            "Безымянный Л": 43, "Безымянный П": 56,
            "Мизинец Л": 56, "Мизинец П": 86
        },
        "1-граммы": {
            "Большой Л": 2531, "Большой П": 0,
            "Указательный Л": 3189549, "Указательный П": 2804517,
            "Средний Л": 1188699, "Средний П": 658493,
            "Безымянный Л": 355122, "Безымянный П": 362931,
            "Мизинец Л": 365128, "Мизинец П": 352390
        }
    },
    "Вызов": {
        "Война и мир": {
            "Большой Л": 6734, "Большой П": 561472,
            "Указательный Л": 509649, "Указательный П": 440499,
            "Средний Л": 554469, "Средний П": 140381,
            "Безымянный Л": 255142, "Безымянный П": 138235,
            "Мизинец Л": 107015, "Мизинец П": 456281
        },
        "Диграммы": {
            "Большой Л": 0, "Большой П": 4,
            "Указательный Л": 112, "Указательный П": 112,
            "Средний Л": 80, "Средний П": 70,
            "Безымянный Л": 67, "Безымянный П": 77,
            "Мизинец Л": 66, "Мизинец П": 128
        },
        "1-граммы": {
            "Большой Л": 0, "Большой П": 0,
            "Указательный Л": 1568260, "Указательный П": 1372367,
            "Средний Л": 1770797, "Средний П": 412122,
            "Безымянный Л": 983025, "Безымянный П": 532694,
            "Мизинец Л": 370167, "Мизинец П": 1422551
        }
    },
    "Русфон": {
        "Война и мир": {
            "Большой Л": 5368, "Большой П": 561472,
            "Указательный Л": 424407, "Указательный П": 423838,
            "Средний Л": 310886, "Средний П": 352135,
            "Безымянный Л": 332341, "Безымянный П": 495148,
            "Мизинец Л": 327867, "Мизинец П": 69788
        },
        "Диграммы": {
            "Большой Л": 0, "Большой П": 4,
            "Указательный Л": 176, "Указательный П": 143,
            "Средний Л": 81, "Средний П": 71,
            "Безымянный Л": 87, "Безымянный П": 69,
            "Мизинец Л": 83, "Мизинец П": 26
        },
        "1-граммы": {
            "Большой Л": 1, "Большой П": 0,
            "Указательный Л": 1397054, "Указательный П": 1638859,
            "Средний Л": 1016580, "Средний П": 1061586,
            "Безымянный Л": 1052939, "Безымянный П": 1304270,
            "Мизинец Л": 1128644, "Мизинец П": 275638
        }
    }
}

# === Порядок для пальцев ===
finger_groups = {
    "Большой": ["Большой Л", "Большой П"],
    "Указательный": ["Указательный Л", "Указательный П"],
    "Средний": ["Средний Л", "Средний П"],
    "Безымянный": ["Безымянный Л", "Безымянный П"],
    "Мизинец": ["Мизинец Л", "Мизинец П"]
}

# === Цвета ===
colors = {"Йцукен": "red", "Вызов": "black", "Русфон": "pink"}

# === Суммирование нагрузок по всем текстам ===
def sum_all_texts(data):
    summed = {}
    for layout, texts in data.items():
        summed[layout] = {}
        for finger_side in next(iter(texts.values())).keys():
            total = 0
            for t in texts.values():
                total += t.get(finger_side, 0)
            summed[layout][finger_side] = total
    return summed

# === Построение графика ===
def plot_all_fingers(data):
    data = sum_all_texts(data)

    fig, axes = plt.subplots(3, 2, figsize=(14, 12))
    axes = axes.flatten()
    fig.suptitle("Сравнение нагрузок на пальцы по раскладкам (сумма всех текстов)", fontsize=16, fontweight="bold")

    for i, (finger_name, sides) in enumerate(finger_groups.items()):
        ax = axes[i]
        for layout, layout_data in data.items():
            values = [layout_data.get(sides[0], 0), layout_data.get(sides[1], 0)]
            ax.plot(sides, values, marker="o", label=layout, color=colors[layout])
        ax.set_title(f"Нагрузка на '{finger_name}' палец", fontsize=12)
        ax.set_ylabel("Количество нажатий")
        ax.tick_params(axis='x', rotation=15)
        ax.legend(loc="best")

    fig.delaxes(axes[-1])  # удалить лишнюю ось
    plt.tight_layout(rect=[0, 0, 1, 0.97])
    plt.show()

if __name__ == "__main__":
    plot_all_fingers(data)
